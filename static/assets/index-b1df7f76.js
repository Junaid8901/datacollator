import{r as s,K as r,L as a,V as d,a2 as i,a6 as u}from"./index-2d311879.js";import{A as te}from"./AppCard-487527ab.js";import{a as m}from"./ToastComponent-231ab741.js";import{C as ae}from"./CardBody-4add9265.js";import{Q as se,m as H,n as U,C as _,Z as oe,W as re}from"./App-2483e876.js";import{T as ce}from"./Table-424cb917.js";import{A as ne}from"./react-paginate-21a7ab7f.js";import{U as le}from"./index-bcb40917.js";import{P as de}from"./PaginationComponent-8416a2dc.js";import{d as ie}from"./getCalenderData-9836b40c.js";import{M as pe}from"./ModalForDelete-e2812b3d.js";import{d as B}from"./TooltipControl-6ccc75fc.js";import{D as ue}from"./DealerAdminButton-4fadf9af.js";import{P as me}from"./ProjectModel-50ae6cc7.js";import"./Card-0873846d.js";import"./CardTitle-7e91e84e.js";import"./Alert-95e83888.js";import"./moment-fbc5633a.js";import"./Label-a41942c5.js";import"./SingleAsyncPagination-dc3f178b.js";import"./index-ff7c4dc5.js";function Fe(){s.useState([]),se(),s.useState({content:""}),s.useState([]);const[v,N]=s.useState([]),[O,k]=s.useState([]),[V,L]=s.useState([]),[M,D]=s.useState([]),[b,y]=s.useState([]),[I,p]=s.useState(!1);s.useState(!1);const[he,w]=s.useState(!1),[fe,$]=s.useState(!0);s.useState(!0);const[E,h]=s.useState(!1),[W,c]=s.useState(!1),[P,A]=s.useState(),[n,C]=s.useState(),[K,ge]=s.useState([]),[f,R]=s.useState(!1),[T,g]=s.useState(!1),[Q,Z]=s.useState(1),[l,S]=s.useState({name:"",project_name:" "}),x=()=>{d.get(`${i}/api/pcd-projects/`).then(e=>{console.log(e),y(e.data.results),p(!1),N(1),D([]);for(let t=0;t<e.data.total_pages;++t)D(o=>o.concat(t+1));k(e.data.page_number+1),L(e.data.page_number-1),e.data.to===e.data.count?(w(!0),$(!1)):e.data.from===1?(w(!1),$(!0)):(w(!1),$(!1))})};s.useEffect(()=>{x()},[]),console.log("dataList",b);const q=e=>{p(!0),N(e),d.get(`${i}/api/pcd-projects/?page=${e}`,{AuthHeaders:u}).then(t=>{y(t.data.results),p(!1),p(!1),N(t.data.page_number),k(t.data.page_number+1),L(t.data.page_number-1)}).catch(()=>p(!1))},z=e=>{c(!0),d.delete(`${i}/api/pcd-projects/${P}/`,u).then(t=>{c(!1),h(!1),x()}).catch(t=>{if(c(!1),t.response&&t.response.status===400)for(const[o,j]of Object.entries(t.response.data))m("error",Info,`${U(o)}: ${j}`)})},F=e=>{c(!0),d.get(`${i}/api/pcd-projects/${e}/`,u).then(t=>{console.log("testname",t.data),S({...l,name:t.data.project_name}),c(!1),h(!1),x()}).catch(t=>{if(c(!1),t.response&&t.response.status===400)for(const[o,j]of Object.entries(t.response.data))m("error",Info,`${U(o)}: ${j}`)})};s.useEffect(()=>{F()},[]);const G=e=>t=>{S({...l,[e]:t.target.value})},J=()=>{console.log("selectedRows",n);const e={project_id:n,source:"pcd_project"};d.post(`${i}/api/exported/${P}/`,e,u).then(t=>{m("success",_,"Successfully export")}).catch(t=>{})},X=()=>{if(g(!0),console.log("selectedRows",n),!l.name)m("error",_,"Enter project name");else{const e={project_name:l.name};d.put(`${i}/api/pcd-projects/${P}/`,e,u).then(t=>{g(!1),x(),m("success",_,"Successfully create"),S({...l,name:""})}).catch(t=>{})}},Y=(e,t,o)=>{e.target.checked?(C(t),R({...f,tester:f})):(C(),K.includes(v)&&C(),R({...f,tester:f}))};console.log("selectedRows",n);const ee=e=>r(s.Fragment,{children:[a(B,{target:`delete-${e}`,Icon:oe,title:"Edit",action:()=>{A(e.id),g(!T),F(e.id),Z(1)}}),a(B,{target:`delete-${e}`,Icon:re,title:"Delete",action:()=>{A(e.id),h(!E)}})]});return r(s.Fragment,{children:[r(te,{children:[r("div",{className:"d-flex align-items-center justify-content-between p-1",children:[a("div",{children:a("h3",{className:"m-0",children:"Project"})}),a("div",{children:a(ue,{onClick:J,disabled:!n,children:"Export"})})]}),a(le,{blocking:I,children:b.length?r(ce,{responsive:!0,children:[a("thead",{children:r("tr",{children:[a("th",{className:"text-nowrap",children:a(H,{type:"checkbox",id:"invoice-select-all",label:"",disabled:!0})}),a("th",{scope:"col",className:"text-nowrap",children:"id"}),a("th",{scope:"col",className:"text-nowrap",children:"Name"})," ",a("th",{scope:"col",className:"text-nowrap",children:"total pcd"}),a("th",{scope:"col",className:"text-nowrap",children:"create Date"}),a("th",{scope:"col",className:"text-nowrap text-right",children:"action"})]})}),a("tbody",{children:b.map((e,t)=>r("tr",{children:[a("th",{children:a(H,{type:"checkbox",id:`department-${e.id}-${t}`,checked:n===e.id,onChange:o=>Y(o,e.id),disabled:""})}),a("td",{className:"text-nowrap cursor-pointer",children:e.id}),a("td",{className:"text-nowrap cursor-pointer  ",children:e?e.project_name:"---"})," ",a("td",{className:"text-nowrap cursor-pointer  ",children:e?e.total_count:"---"})," ",r("td",{className:"text-nowrap",children:[" ",ie(e.created_at)]}),a("td",{className:"text-right",onClick:()=>setDid(e.id),children:ee(e)})]},t))})]}):a(ae,{children:a(ne,{color:"danger",msg:"No results found!"})})}),M.length>1&&a(de,{pageList:M,page:v,next:O,prev:V,paginate:q,isLoading:I})]}),a(pe,{isLoading:W,centeredModal:E,setCenteredModal:h,onDelete:z}),a(me,{open:T,setOpen:g,handleChange:G,setValue:S,value:l,CreateProjectHandleModal:X,selectProject:Q,buttonName:"Update"})]})}export{Fe as default};
