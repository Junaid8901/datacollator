import{r as a,K as o,L as t,V as u,a2 as m,a6 as L}from"./index-3d883fcf.js";import{A as k}from"./AppCard-4a4dc868.js";import{a as j}from"./ToastComponent-8641b054.js";import{C as y}from"./CardBody-936a8236.js";import{T as B}from"./Table-3067e42e.js";import{Z as E,k as H,v as U,q,a0 as K}from"./App-5cbcf20f.js";import{A as O}from"./AlertComponent-bf42c7e0.js";import{P as R}from"./PaginationComponent-813577e2.js";import{d as V}from"./getCalenderData-9836b40c.js";import{d as W}from"./TooltipControl-b72a6e51.js";import"./Card-592ff91e.js";import"./CardTitle-59b85a96.js";import"./Alert-a7a9f3c0.js";import"./moment-fbc5633a.js";function Z(){a.useState([]),E(),a.useState({content:""}),a.useState([]);const[C,n]=a.useState([]),[P,f]=a.useState([]),[_,h]=a.useState([]),[g,x]=a.useState([]),[N,w]=a.useState([]),[S,r]=a.useState(!1);a.useState(!1);const[z,l]=a.useState(!1),[G,c]=a.useState(!0);a.useState(!0);const[b,d]=a.useState(!1),[$,i]=a.useState(!1),[v,I]=a.useState(!1),D=()=>{u.get(`${m}/api/exported/`).then(e=>{console.log(e),w(e.data.results),r(!1),n(1),x([]);for(let s=0;s<e.data.total_pages;++s)x(p=>p.concat(s+1));f(e.data.page_number+1),h(e.data.page_number-1),e.data.to===e.data.count?(l(!0),c(!1)):e.data.from===1?(l(!1),c(!0)):(l(!1),c(!1))})};a.useEffect(()=>{D()},[]);const F=e=>{r(!0),n(e),u.get(`${m}/api/exported/?page=${e}`,{AuthHeaders:L}).then(s=>{w(s.data.results),r(!1),r(!1),n(s.data.page_number),f(s.data.page_number+1),h(s.data.page_number-1)}).catch(()=>r(!1))},M=e=>{i(!0),u.delete(`${m}/api/exported/${v}/`,L).then(s=>{i(!1),d(!1),D()}).catch(s=>{if(i(!1),s.response&&s.response.status===400)for(const[p,T]of Object.entries(s.response.data))j("error",Info,`${q(p)}: ${T}`)})},A=e=>t(a.Fragment,{children:t(W,{target:`delete-${e}`,Icon:K,title:"Delete",action:()=>{I(e.id),d(!b)}})});return o(a.Fragment,{children:[o(k,{children:[t(H,{blocking:S,children:N.length?o(B,{responsive:!0,children:[t("thead",{children:o("tr",{children:[t("th",{scope:"col",className:"text-nowrap",children:"id"}),t("th",{scope:"col",className:"text-nowrap",children:"Name"})," ",t("th",{scope:"col",className:"text-nowrap",children:"create Date"}),t("th",{scope:"col",className:"text-nowrap",children:"status"}),t("th",{scope:"col",className:"text-nowrap ",children:"File"}),t("th",{scope:"col",className:"text-nowrap text-right",children:"action"})]})}),t("tbody",{children:N.map((e,s)=>o("tr",{children:[t("td",{className:"text-nowrap cursor-pointer",children:e.id}),t("td",{className:"text-nowrap cursor-pointer  ",children:e.user_detail?e.user_detail.name:"---"})," ",o("td",{className:"text-nowrap",children:[" ",V(e.created_at)]}),t("td",{className:"text-nowrap",children:(e.status==="In progress",e.status)}),t("td",{className:"text-nowrap cursor-pointer costume-class ",children:t("a",{href:e.file,className:"file-list a",children:"Download"})})," ",t("td",{className:"text-right",onClick:()=>setDid(e.id),children:A(e)})]},s))})]}):t(y,{children:t(O,{color:"danger",msg:"No results found!"})})}),g.length>1&&t(R,{pageList:g,page:C,next:P,prev:_,paginate:F,isLoading:S})]}),t(U,{isLoading:$,centeredModal:b,setCenteredModal:d,onDelete:M})]})}function ie(){return t(Z,{})}export{ie as default};
