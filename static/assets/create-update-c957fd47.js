import{r as n,K as t,J as c,a8 as T,B as m,a0 as S,U as v,a1 as j,a5 as y}from"./index-a78e1d6d.js";import{u as B,P as O,F as A,d as M,k as V,n as z,I as R,C as k}from"./App-efc1b7be.js";import{T as G}from"./Table-425d6904.js";import{I}from"./Input-c0987a3f.js";import{L}from"./Label-04986467.js";import"./SingleAsyncPagination-8de520fc.js";import{a as h}from"./ToastComponent-995c97dd.js";import{A as J}from"./AppCard-5dd622ab.js";import{U as K}from"./index-bfeadac6.js";import"./index-b9dfdea5.js";import"./Card-d18638bb.js";import"./CardBody-d3a746c0.js";import"./CardTitle-4fff166c.js";import"./AdminButton-84e07a20.js";function je({open:q,setOpen:Q,agreementError:W,handleCreate:X,handleUpdate:Y,checkDisabled:Z,dealerEmail:ee,UpdateProjectHandleModal:te,handleChangeSelect:se,selectProject:ae,buttonName:re,err:ne}){n.useState(!1);const[a,f]=n.useState({}),[_,w]=n.useState(null),[de,l]=n.useState(!1),[g,oe]=n.useState(!1),[P,C]=n.useState(),[d,p]=n.useState([]),[r,u]=n.useState({name:"",project_name:" ",pcd_refsets:[]}),i=B(),{id:b}=O(),x=e=>{console.log("hello"),f({}),w(_===e?null:e)},D=(e,s)=>{f({...a,[s]:e.target.value})},U=e=>s=>{u({...r,[e]:s.target.value})},E=()=>{l(!0),C(!0),v.get(`${j}/api/pcd-projects/${b}/`,y).then(e=>{u({...r,name:e.data.project_name,pcd_refsets:e.data.pcd_refsets});const s=e.data.pcd_refsets.map(o=>o.id);p(s),l(!1),C(!1)}).catch(e=>{if(l(!1),e.response&&e.response.status===400)for(const[s,o]of Object.entries(e.response.data))h("error",R,`${z(s)}: ${o}`)})};n.useEffect(()=>{E()},[]);const N=[{name:"id",value:"id"},{name:"Db Type ",value:"db_type"},{name:"cluster id",value:"cluster_id"},{name:"output id",value:"output_id"},{name:" snomed code",value:"snomed_code"},{name:" pcd refset id",value:"pcd_refset_id"}],H=a.id?r.pcd_refsets.filter(e=>String(e.id).includes(String(a.id))):a.db_type?r.pcd_refsets.filter(e=>String(e.db_type).includes(String(a.db_type))):a.cluster_id?r.pcd_refsets.filter(e=>String(e.cluster_id).toLowerCase().includes(String(a.cluster_id).toLowerCase())):a.output_id?r.pcd_refsets.filter(e=>String(e.output_id).toLowerCase().includes(String(a.output_id).toLowerCase())):a.snomed_code?r.pcd_refsets.filter(e=>String(e.snomed_code).includes(String(a.snomed_code))):a.pcd_refset_id?r.pcd_refsets.filter(e=>String(e.pcd_refset_id).includes(String(a.pcd_refset_id))):r.pcd_refsets,$=()=>{if(!r.name)h("error",k,"Enter project name");else{const e={project_name:r.name,pcd_refsets:d,remove:!0};v.put(`${j}/api/pcd-projects/${b}/`,e,y).then(s=>{h("success",k,"Successfully create"),u({...r,name:""}),setTimeout(()=>{i.push(i.goBack()?i.goBack():"/project")},1e3)}).catch(s=>{})}},F=e=>{if(d.includes(e)){const s=d.filter(o=>o!==e);console.log("code123",s),p(s)}else p([...d,e])};return console.log("value",d),t(n.Fragment,{children:c(J,{body:!0,title:"Edit Project",children:[" ",c(A,{children:[t(L,{children:"Project Name"}),t(I,{type:"text",value:r.name,onChange:U("name")})]})," ",t(L,{children:"Pcd Refsets Id"}),c(K,{blocking:P,children:[" ",t("div",{className:"sidebartable",children:c(G,{responsive:!0,children:[t("thead",{className:"theadtable",children:t("tr",{children:N.map((e,s)=>t("th",{className:"text-nowrap",children:c(T,{children:[t(m,{color:"primary",onClick:()=>x(e.name),className:"project-dropdown",children:t("p",{children:e.name})}),t(M,{isOpen:_===e.name,children:t(I,{className:"input",type:"text",placeholder:"Enter text",value:a[e.value]||"",onChange:o=>D(o,e.value)})})]})},s))})}),t("tbody",{children:H.map((e,s)=>c("tr",{children:[t("td",{children:t(V,{id:e.id,type:"checkbox",label:e.id,checked:d&&d.includes&&d.includes(e.id),onChange:o=>F(e.id)},s)})," ",t("td",{children:e.db_type}),t("td",{children:e.cluster_id?e.cluster_id:"---"}),t("td",{children:e.output_id?e.output_id:"---"}),t("td",{children:e.snomed_code?e.snomed_code:"---"}),t("td",{className:"last-td",children:e.pcd_refset_id})]},s))})]})})," "]}),t("br",{}),c(m,{color:"primary",onClick:$,children:["Update",g&&t(S,{size:"sm"})]})," ","Â ",c(m,{outline:!0,onClick:()=>i.push("/project"),children:["Cancel",g&&t(S,{size:"sm"})]})]})})}export{je as default};
