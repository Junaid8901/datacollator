import{r as a,K as o,L as t,V as u,a2 as m,a6 as L}from"./index-2d311879.js";import{A as j}from"./AppCard-487527ab.js";import{a as y}from"./ToastComponent-231ab741.js";import{C as k}from"./CardBody-4add9265.js";import{T as U}from"./Table-424cb917.js";import{Q as B,n as E,W as H}from"./App-2483e876.js";import{A as W}from"./react-paginate-21a7ab7f.js";import{U as K}from"./index-bcb40917.js";import{P as O}from"./PaginationComponent-8416a2dc.js";import{d as Q}from"./getCalenderData-9836b40c.js";import{M as R}from"./ModalForDelete-e2812b3d.js";import{d as V}from"./TooltipControl-6ccc75fc.js";import"./Card-0873846d.js";import"./CardTitle-7e91e84e.js";import"./DealerAdminButton-4fadf9af.js";import"./Alert-95e83888.js";import"./moment-fbc5633a.js";function q(){a.useState([]),B(),a.useState({content:""}),a.useState([]);const[C,n]=a.useState([]),[P,h]=a.useState([]),[_,f]=a.useState([]),[g,x]=a.useState([]),[N,w]=a.useState([]),[S,r]=a.useState(!1);a.useState(!1);const[z,l]=a.useState(!1),[G,c]=a.useState(!0);a.useState(!0);const[b,d]=a.useState(!1),[v,i]=a.useState(!1),[$,F]=a.useState(!1),D=()=>{u.get(`${m}/api/exported/`).then(e=>{console.log(e),w(e.data.results),r(!1),n(1),x([]);for(let s=0;s<e.data.total_pages;++s)x(p=>p.concat(s+1));h(e.data.page_number+1),f(e.data.page_number-1),e.data.to===e.data.count?(l(!0),c(!1)):e.data.from===1?(l(!1),c(!0)):(l(!1),c(!1))})};a.useEffect(()=>{D()},[]);const I=e=>{r(!0),n(e),u.get(`${m}/api/exported/?page=${e}`,{AuthHeaders:L}).then(s=>{w(s.data.results),r(!1),r(!1),n(s.data.page_number),h(s.data.page_number+1),f(s.data.page_number-1)}).catch(()=>r(!1))},M=e=>{i(!0),u.delete(`${m}/api/exported/${$}/`,L).then(s=>{i(!1),d(!1),D()}).catch(s=>{if(i(!1),s.response&&s.response.status===400)for(const[p,T]of Object.entries(s.response.data))y("error",Info,`${E(p)}: ${T}`)})},A=e=>t(a.Fragment,{children:t(V,{target:`delete-${e}`,Icon:H,title:"Delete",action:()=>{F(e.id),d(!b)}})});return o(a.Fragment,{children:[o(j,{children:[t("div",{className:"d-flex align-items-center justify-content-between p-1",children:t("div",{children:t("h3",{className:"m-0",children:"Download File"})})}),t(K,{blocking:S,children:N.length?o(U,{responsive:!0,children:[t("thead",{children:o("tr",{children:[t("th",{scope:"col",className:"text-nowrap",children:"id"}),t("th",{scope:"col",className:"text-nowrap",children:"Name"})," ",t("th",{scope:"col",className:"text-nowrap",children:"source"}),t("th",{scope:"col",className:"text-nowrap",children:"status"}),t("th",{scope:"col",className:"text-nowrap ",children:"File"})," ",t("th",{scope:"col",className:"text-nowrap",children:"create Date"}),t("th",{scope:"col",className:"text-nowrap text-right",children:"action"})]})}),t("tbody",{children:N.map((e,s)=>o("tr",{children:[t("td",{className:"text-nowrap cursor-pointer",children:e.id}),t("td",{className:"text-nowrap cursor-pointer  ",children:e.user_detail.name?e.user_detail.name:"---"})," ",t("td",{className:"text-nowrap",children:e.source?e.source:"---"}),t("td",{className:"text-nowrap",children:(e.status==="In progress",e.status)}),t("td",{className:"text-nowrap cursor-pointer costume-class ",children:t("a",{href:e.file,className:"file-list a",children:"Download"})})," ",o("td",{className:"text-nowrap",children:[" ",Q(e.created_at)]}),t("td",{className:"text-right",onClick:()=>setDid(e.id),children:A(e)})]},s))})]}):t(k,{children:t(W,{color:"danger",msg:"No results found!"})})}),g.length>1&&t(O,{pageList:g,page:C,next:P,prev:_,paginate:I,isLoading:S})]}),t(R,{isLoading:v,centeredModal:b,setCenteredModal:d,onDelete:M})]})}function me(){return t(q,{})}export{me as default};
