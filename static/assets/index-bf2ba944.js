import{r as a,J as o,K as t,U as u,a1 as m,a5 as P}from"./index-67acb5a9.js";import{A as j}from"./AppCard-bb24aa62.js";import{a as C}from"./ToastComponent-252645f5.js";import{C as U}from"./CardBody-73830640.js";import{T as k}from"./Table-63808cde.js";import{P as B,n as E,V as H}from"./App-ce653d86.js";import{A as J}from"./AlertComponent-a4438a5a.js";import{U as K}from"./index-9933d28c.js";import"./react-paginate-f55c1d30.js";import{P as O}from"./PaginationComponent-c4a997ab.js";import{d as R}from"./getCalenderData-9836b40c.js";import{M as V}from"./ModalForDelete-298e5394.js";import{d as W}from"./TooltipControl-9379d2bb.js";import"./Card-4fea091a.js";import"./CardTitle-5ac35081.js";import"./DealerAdminButton-7238082e.js";import"./Alert-da2d672f.js";import"./moment-fbc5633a.js";function q(){a.useState([]),B(),a.useState({content:""}),a.useState([]);const[L,n]=a.useState([]),[_,h]=a.useState([]),[v,f]=a.useState([]),[g,x]=a.useState([]),[N,w]=a.useState([]),[S,r]=a.useState(!1);a.useState(!1);const[z,l]=a.useState(!1),[G,c]=a.useState(!0);a.useState(!0);const[b,d]=a.useState(!1),[I,i]=a.useState(!1),[$,F]=a.useState(!1),D=()=>{u.get(`${m}/api/exported/`).then(e=>{console.log(e),w(e.data.results),r(!1),n(1),x([]);for(let s=0;s<e.data.total_pages;++s)x(p=>p.concat(s+1));h(e.data.page_number+1),f(e.data.page_number-1),e.data.to===e.data.count?(l(!0),c(!1)):e.data.from===1?(l(!1),c(!0)):(l(!1),c(!1))})};a.useEffect(()=>{D()},[]);const M=e=>{r(!0),n(e),u.get(`${m}/api/exported/?page=${e}`,{AuthHeaders:P}).then(s=>{w(s.data.results),r(!1),r(!1),n(s.data.page_number),h(s.data.page_number+1),f(s.data.page_number-1)}).catch(()=>r(!1))},y=e=>{i(!0),u.delete(`${m}/api/exported/${$}/`,P).then(s=>{C("error",Info,"Successfully Deleted"),i(!1),d(!1),D()}).catch(s=>{if(i(!1),s.response&&s.response.status===400)for(const[p,T]of Object.entries(s.response.data))C("error",Info,`${E(p)}: ${T}`)})},A=e=>t(a.Fragment,{children:t(W,{target:`delete-${e}`,Icon:H,title:"Delete",action:()=>{F(e.id),d(!b)}})});return o(a.Fragment,{children:[o(j,{children:[t("div",{className:"d-flex align-items-center justify-content-between p-1",children:t("div",{children:t("h3",{className:"m-0",children:"Download File"})})}),t(K,{blocking:S,children:N.length?o(k,{responsive:!0,children:[t("thead",{children:o("tr",{children:[t("th",{scope:"col",className:"text-nowrap",children:"id"}),t("th",{scope:"col",className:"text-nowrap",children:"Name"})," ",t("th",{scope:"col",className:"text-nowrap",children:"source"}),t("th",{scope:"col",className:"text-nowrap",children:"status"}),t("th",{scope:"col",className:"text-nowrap ",children:"File"})," ",t("th",{scope:"col",className:"text-nowrap",children:"create Date"}),t("th",{scope:"col",className:"text-nowrap text-right",children:"action"})]})}),t("tbody",{children:N.map((e,s)=>o("tr",{children:[t("td",{className:"text-nowrap cursor-pointer",children:e.id}),t("td",{className:"text-nowrap cursor-pointer  ",children:e.user_detail.name?e.user_detail.name:"---"})," ",t("td",{className:"text-nowrap",children:e.source?e.source:"---"}),t("td",{className:"text-nowrap",children:(e.status==="In progress",e.status)}),t("td",{className:"text-nowrap cursor-pointer costume-class ",children:t("a",{href:e.file,className:"file-list a",children:"Download"})})," ",o("td",{className:"text-nowrap",children:[" ",R(e.created_at)]}),t("td",{className:"text-right",onClick:()=>setDid(e.id),children:A(e)})]},s))})]}):t(U,{children:t(J,{color:"danger",msg:"No results found!"})})}),g.length>1&&t(O,{pageList:g,page:L,next:_,prev:v,paginate:M,isLoading:S})]}),t(V,{isLoading:I,centeredModal:b,setCenteredModal:d,onDelete:y})]})}function he(){return t(q,{})}export{he as default};
